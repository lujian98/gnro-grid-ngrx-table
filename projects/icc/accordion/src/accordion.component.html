@for (item of itemList(); track $index; let index = $index) {
  <icc-layout [style.flex]="getHeaderStyle(item)">
    <icc-layout-header
      [class.icc-accordion-item-expanded]="item.expanded"
      [title]="getTitle(item)"
      (click)="toggle(item, !!item.expanded)"
    >
      @if (item.expanded) {
        <icc-icon config="chevron-up"></icc-icon>
      } @else {
        <icc-icon config="chevron-down"></icc-icon>
      }
    </icc-layout-header>

    @if (item?.expanded && item.items) {
      <icc-layout-horizontal>
        <icc-menus [items]="item.items" (iccMenuItemClick)="onMenuItemClick($event)"></icc-menus>
      </icc-layout-horizontal>
    }
  </icc-layout>
}
