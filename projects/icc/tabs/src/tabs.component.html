<ng-container *ngIf="tabsConfig$ | async as tabsConfig">
  <icc-tab-group
    *ngIf="tabsSetting$ | async as tabsSetting"
    cdkDropList
    cdkDropListOrientation="horizontal"
    (cdkDropListDropped)="drop($event)"
    cdkDropListElementContainer=".icc-mdc-tab-labels"
    class="icc-drag-tabs"
    [selectedIndex]="tabsConfig.selectedTabIndex"
    animationDuration="0"
    (selectedIndexChange)="onSelectedIndexChange($event)"
    [icc-align-tabs]="tabsConfig.alignTabs"
  >
    @for (tab of tabs; track $index; let index = $index) {
      <icc-tab>
        <ng-template icc-tab-label>
          <icc-tabs-view [tabsConfig]="tabsConfig" [tab]="tab" [index]="index"> </icc-tabs-view>
        </ng-template>

        @if (index === tabsConfig.selectedTabIndex) {
          <icc-portal [content]="tab.content!" [context]="tab.context!"></icc-portal>
        }
      </icc-tab>
    }
  </icc-tab-group>
</ng-container>
