@if (treeConfig().rowSelection) {
  <gnro-grid-cell
    class="gnro-tree-cell-row-select"
    [class.gnro-tree-cell-row-sticky]="treeConfig().columnSticky"
    [style.flex]="'0 0 ' + selectColumnWidth"
    [style.left]="treeConfig().columnSticky ? '0px' : 'unset'"
    [gridConfig]="treeConfig()"
    [sticky]="treeConfig().columnSticky"
    [selected]="selected()"
    [rowIndex]="rowIndex()"
    column="selection"
    [columns]="columns()"
    [columnWidths]="columnWidths()"
  >
    <gnro-row-select [selected]="selected()"> </gnro-row-select>
  </gnro-grid-cell>
}

@if (treeColumn && !treeColumn.hidden) {
  <gnro-grid-cell
    [class.gnro-tree-cell-row-sticky]="treeConfig().columnSticky"
    [class.gnro-grid-column-last-sticky]="isLastSticky(0)"
    [style.padding-left]="nodePadding + 'px'"
    [style.flex]="'0 0 ' + getColumnWidth(treeColumn)"
    [style.max-width]="getColumnWidth(treeColumn)"
    [style.left]="getStickyLeft(columns()[0], 0)"
    [gridConfig]="treeConfig()"
    [sticky]="treeConfig().columnSticky"
    [selected]="selected()"
    [rowIndex]="rowIndex()"
    [column]="treeColumn"
    [columns]="columns()"
    [columnWidths]="columnWidths()"
  >
    <gnro-tree-node [gridSetting]="gridSetting()" [treeConfig]="treeConfig()" [node]="record()" [column]="treeColumn">
    </gnro-tree-node>
  </gnro-grid-cell>
}

@for (column of columns(); track $index; let index = $index) {
  @if (!column.hidden && column.name !== "name") {
    <gnro-grid-cell
      [class.gnro-tree-cell-row-sticky]="treeConfig().columnSticky && (column.sticky || column.stickyEnd)"
      [class.gnro-grid-column-last-sticky]="isLastSticky(index)"
      [class.gnro-grid-column-first-sticky-end]="isFirstStickyEnd(index)"
      [style.flex]="'0 0 ' + getColumnWidth(column)"
      [style.max-width]="getColumnWidth(column)"
      [style.left]="getStickyLeft(column, index)"
      [style.right]="getStickyRight(column, index)"
      [gridConfig]="treeConfig()"
      [sticky]="!!(treeConfig().columnSticky && (column.sticky || column.stickyEnd))"
      [selected]="selected()"
      [rowIndex]="rowIndex()"
      [column]="column"
      [columns]="columns()"
      [columnWidths]="columnWidths()"
    >
      <gnro-grid-cell-view [gridConfig]="treeConfig()" [rowIndex]="rowIndex()" [record]="record()" [column]="column">
      </gnro-grid-cell-view>
    </gnro-grid-cell>
  }
}
